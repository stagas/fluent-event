<h1 align="center">fluent-event</h1>

<p align="center">
fluent dom event toolkit
</p>

<p align="center">
   <a href="#install">        🔧 <strong>Install</strong></a>
 · <a href="#example">        🧩 <strong>Example</strong></a>
 · <a href="#api">            📜 <strong>API docs</strong></a>
 · <a href="https://github.com/stagas/fluent-event/releases"> 🔥 <strong>Releases</strong></a>
 · <a href="#contribute">     💪🏼 <strong>Contribute</strong></a>
 · <a href="https://github.com/stagas/fluent-event/issues">   🖐️ <strong>Help</strong></a>
</p>

---

## Install

```sh
$ npm i fluent-event
```

Several utilities for dealing with DOM events.
**Typed** and also **tree-shakeable** so you only include what you use.

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

- [debounce](#debounce)
- [event](#event)
- [on](#on)
- [off](#off)
  - [Parameters](#parameters)
- [queue](#queue)
  - [raf](#raf)
  - [time](#time)
  - [task](#task)

### debounce

[src/debounce.ts:21-44](https://github.com/stagas/fluent-event/blob/c95b2023c43dc7ef704f6104a2543c975a778e10/src/debounce.ts#L21-L44 'Source code on GitHub')

Decorate function `fn` with debounce delay `ms`.

Flags: `first` => run `fn` first, then debounce

```ts
fn = (x: number) => console.log(x)
// => runs `fn` after 100ms following last call
cb = debounce(fn, 100)
cb(1)
cb(2) // <- cb(2) wins, prints `2`

// => runs `fn` first then debounces until 100ms of inactivity
cb = debounce.first(fn, 100)
cb(1) // <- cb(1) wins, prints `1`
cb(2)
```

### event

[src/event.ts:23-33](https://github.com/stagas/fluent-event/blob/c95b2023c43dc7ef704f6104a2543c975a778e10/src/event.ts#L23-L33 'Source code on GitHub')

Decorates event listener `fn`.

Flags:

- `prevent` => `event.preventDefault()`
- `stop` => `event.stopPropagation()`
- `stop.immediate` => `event.stopImmediatePropagation()`

```ts
btn.onclick = event(fn)
btn.onclick = event.prevent(fn)
btn.onclick = event.prevent.stop(fn)
btn.onclick = event.stop.immediate(fn)
```

### on

[src/on.ts:40-44](https://github.com/stagas/fluent-event/blob/c95b2023c43dc7ef704f6104a2543c975a778e10/src/on.ts#L40-L44 'Source code on GitHub')

Adds a DOM event `listener` to an event `type` using `options` and returns its remover.

Flags: `capture` | `once` | `passive`

```ts
on(btn, 'click', fn)
on.once(btn, 'click', fn)
on.passive(div, 'wheel', fn)

const off = on.passive.capture(btn, 'wheel', fn)
// ...later...
off() // remove listener
```

### off

[src/on.ts:49-54](https://github.com/stagas/fluent-event/blob/c95b2023c43dc7ef704f6104a2543c975a778e10/src/on.ts#L49-L54 'Source code on GitHub')

Removes an event `listener` of type `type` from `el` using `options`.

#### Parameters

- `el` **T**&#x20;
- `type` **K**&#x20;
- `listener` **function (ev: any): any**&#x20;
- `options` **([boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | AddEventListenerOptions)?**&#x20;

### queue

[src/queue.ts:23-45](https://github.com/stagas/fluent-event/blob/c95b2023c43dc7ef704f6104a2543c975a778e10/src/queue.ts#L23-L45 'Source code on GitHub')

Queue.

All queue functions are also throttled to once per invocation.

#### raf

[src/queue.ts:30-30](https://github.com/stagas/fluent-event/blob/c95b2023c43dc7ef704f6104a2543c975a778e10/src/queue.ts#L30-L30 'Source code on GitHub')

Decorate function with `requestAnimationFrame`.

```ts
queue.raf(cb)
```

#### time

[src/queue.ts:37-37](https://github.com/stagas/fluent-event/blob/c95b2023c43dc7ef704f6104a2543c975a778e10/src/queue.ts#L37-L37 'Source code on GitHub')

Decorate function with `setTimeout`.

```ts
queue.time(cb)
```

#### task

[src/queue.ts:44-44](https://github.com/stagas/fluent-event/blob/c95b2023c43dc7ef704f6104a2543c975a778e10/src/queue.ts#L44-L44 'Source code on GitHub')

Decorate function with `queueMicrotask`.

```ts
queue.task(cb)
```

## Contribute

[Fork](https://github.com/stagas/fluent-event/fork) or
[edit](https://github.dev/stagas/fluent-event) and submit a PR.

All contributions are welcome!

## License

MIT © 2022
[stagas](https://github.com/stagas)
